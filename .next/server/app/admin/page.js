(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},4111:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=t(482),o=t(9108),n=t(2563),s=t.n(n),i=t(8300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9481)),"D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\admin\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2585)),"D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\admin\\page.tsx"],u="/admin/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6824:(e,r,t)=>{Promise.resolve().then(t.bind(t,6243))},712:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},3759:()=>{},6243:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>eu});var a=t(5344),o=t(3729),n=t(1013),s=t(5803),i=t(2383),l=t(8136),d=t(918),c=t(1848),u=t(5651),m=t(6815),h=t(581),p=t(1605),v=t(7336),g=t(8449),f=t(3173);function x(e){return e.substring(2).toLowerCase()}function b(e){let{children:r,disableReactTree:t=!1,mouseEvent:n="onClick",onClickAway:s,touchEvent:i="onTouchEnd"}=e,l=o.useRef(!1),d=o.useRef(null),c=o.useRef(!1),u=o.useRef(!1);o.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);let m=(0,p.Z)((0,v.Z)(r),d),h=(0,g.Z)(e=>{let r=u.current;u.current=!1;let a=(0,f.Z)(d.current);if(c.current&&d.current&&(!("clientX"in e)||!(a.documentElement.clientWidth<e.clientX)&&!(a.documentElement.clientHeight<e.clientY))){if(l.current){l.current=!1;return}(e.composedPath?e.composedPath().indexOf(d.current)>-1:!a.documentElement.contains(e.target)||d.current.contains(e.target))||!t&&r||s(e)}}),b=e=>t=>{u.current=!0;let a=r.props[e];a&&a(t)},y={ref:m};return!1!==i&&(y[i]=b(i)),o.useEffect(()=>{if(!1!==i){let e=x(i),r=(0,f.Z)(d.current),t=()=>{l.current=!0};return r.addEventListener(e,h),r.addEventListener("touchmove",t),()=>{r.removeEventListener(e,h),r.removeEventListener("touchmove",t)}}},[h,i]),!1!==n&&(y[n]=b(n)),o.useEffect(()=>{if(!1!==n){let e=x(n),r=(0,f.Z)(d.current);return r.addEventListener(e,h),()=>{r.removeEventListener(e,h)}}},[h,n]),(0,a.jsx)(o.Fragment,{children:o.cloneElement(r,y)})}var y=t(1446),j=t(2528),k=t(589),Z=t(1241),S=t(2165),w=t(7962),N=t(9676),C=t(2084),E=t(474),z=t(4369);function A(e){return(0,z.d6)("MuiSnackbar",e)}(0,z.sI)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);let P=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"],D=e=>e,$,R,L=e=>{let{variant:r,color:t,size:a,anchorOrigin:o}=e,n={root:["root",a&&`size${(0,k.Z)(a)}`,t&&`color${(0,k.Z)(t)}`,r&&`variant${(0,k.Z)(r)}`,`anchorOrigin${(0,k.Z)(o.vertical)}${(0,k.Z)(o.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return(0,h.Z)(n,A,{})},O=(0,Z.F4)($||($=D`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),I=(0,Z.F4)(R||(R=D`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),M=(0,w.Z)("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>{var t,a,o,n,s,i,l;let{p:d,padding:c,borderRadius:m}=(0,C.V)({theme:e,ownerState:r},["p","padding","borderRadius"]);return[(0,u.Z)({"--Snackbar-radius":e.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},"sm"===r.size&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.5rem"},"md"===r.size&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.625rem"},"lg"===r.size&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":e.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:e.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:(null==(t=r.anchorOrigin)?void 0:t.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:(null==(a=r.anchorOrigin)?void 0:a.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:(null==(o=r.anchorOrigin)?void 0:o.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:(null==(n=r.anchorOrigin)?void 0:n.horizontal)==="right"?"var(--Snackbar-inset)":void 0},(null==(s=r.anchorOrigin)?void 0:s.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},(null==(i=r.anchorOrigin)?void 0:i.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${O} ${r.animationDuration}ms forwards`},!r.open&&{animationName:I},{boxShadow:e.vars.shadow.lg,backgroundColor:e.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},e.typography[`body-${({sm:"xs",md:"sm",lg:"md"})[r.size]}`],"solid"===r.variant&&r.color&&r.invertedColors&&(0,E.Qr)(r.color)(e),"soft"===r.variant&&r.color&&r.invertedColors&&(0,E.Ev)(r.color)(e),null==(l=e.variants[r.variant])?void 0:l[r.color]),void 0!==d&&{"--Snackbar-padding":d},void 0!==c&&{"--Snackbar-padding":c},void 0!==m&&{"--Snackbar-radius":m}]}),B=(0,w.Z)("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(e,r)=>r.startDecorator})({display:"inherit",flex:"none"}),F=(0,w.Z)("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(e,r)=>r.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),W={vertical:"bottom",horizontal:"right"},H=o.forwardRef(function(e,r){let t=(0,N.Z)({props:e,name:"JoySnackbar"}),{anchorOrigin:n=W,animationDuration:s=300,autoHideDuration:i=null,color:l="neutral",children:d,className:h,component:p,disableWindowBlurListener:v=!1,endDecorator:f,invertedColors:x=!1,onUnmount:k,open:Z,size:w="md",slots:C={},slotProps:E,startDecorator:z,variant:A="outlined"}=t,D=(0,c.Z)(t,P),[$,R]=o.useState(!0),[O,I]=o.useState(!1),H=o.useRef(k);H.current=k,o.useEffect(()=>{if(Z)I(!1),R(!1);else{I(!0);let e=setTimeout(()=>{var e;R(!0),I(!1),null==(e=H.current)||e.call(H)},s);return()=>{clearTimeout(e)}}},[Z,s]);let _=(0,u.Z)({},t,{anchorOrigin:n,autoHideDuration:i,color:l,animationDuration:s,disableWindowBlurListener:v,invertedColors:x,size:w,variant:A});delete _.onUnmount;let J=L(_),{getRootProps:T,onClickAway:U}=function(e={}){let{autoHideDuration:r=null,disableWindowBlurListener:t=!1,onClose:a,open:n,resumeHideDuration:s}=e,i=(0,y.Z)();o.useEffect(()=>{if(n)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==a||a(e,"escapeKeyDown")}},[n,a]);let l=(0,g.Z)((e,r)=>{null==a||a(e,r)}),d=(0,g.Z)(e=>{a&&null!=e&&i.start(e,()=>{l(null,"timeout")})});o.useEffect(()=>(n&&d(r),i.clear),[n,r,d,i]);let c=i.clear,m=o.useCallback(()=>{null!=r&&d(null!=s?s:.5*r)},[r,s,d]),h=e=>r=>{let t=e.onBlur;null==t||t(r),m()},p=e=>r=>{let t=e.onFocus;null==t||t(r),c()},v=e=>r=>{let t=e.onMouseEnter;null==t||t(r),c()},f=e=>r=>{let t=e.onMouseLeave;null==t||t(r),m()};return o.useEffect(()=>{if(!t&&n)return window.addEventListener("focus",m),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",c)}},[t,n,m,c]),{getRootProps:(r={})=>{let t=(0,u.Z)({},(0,j.Z)(e),(0,j.Z)(r));return(0,u.Z)({role:"presentation"},r,t,{onBlur:h(t),onFocus:p(t),onMouseEnter:v(t),onMouseLeave:f(t)})},onClickAway:e=>{null==a||a(e,"clickaway")}}}(_),X=(0,u.Z)({},D,{component:p,slots:C,slotProps:E}),[q,G]=(0,S.Z)("root",{ref:r,className:(0,m.Z)(J.root,h),elementType:M,externalForwardedProps:X,getSlotProps:T,ownerState:_}),[V,Y]=(0,S.Z)("startDecorator",{className:J.startDecorator,elementType:B,externalForwardedProps:X,ownerState:_}),[K,Q]=(0,S.Z)("endDecorator",{className:J.endDecorator,elementType:F,externalForwardedProps:X,ownerState:_}),ee=C.clickAway||b;return!Z&&$?null:(0,a.jsx)(ee,(0,u.Z)({onClickAway:e=>{O||U(e)}},"function"==typeof(null==E?void 0:E.clickAway)?E.clickAway(_):null==E?void 0:E.clickAway,{children:(0,a.jsxs)(q,(0,u.Z)({},G,{children:[z&&(0,a.jsx)(V,(0,u.Z)({},Y,{children:z})),d,f&&(0,a.jsx)(K,(0,u.Z)({},Q,{children:f}))]}))}))});function _(e){return(0,z.d6)("MuiAlert",e)}(0,z.sI)("MuiAlert",["root","startDecorator","endDecorator","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let J=["children","className","color","invertedColors","role","variant","size","startDecorator","endDecorator","component","slots","slotProps"],T=e=>{let{variant:r,color:t,size:a}=e,o={root:["root",a&&`size${(0,k.Z)(a)}`,t&&`color${(0,k.Z)(t)}`,r&&`variant${(0,k.Z)(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return(0,h.Z)(o,_,{})},U=(0,w.Z)("div",{name:"JoyAlert",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>{var t;let{p:a,padding:o,borderRadius:n}=(0,C.V)({theme:e,ownerState:r},["p","padding","borderRadius"]);return[(0,u.Z)({"--Alert-radius":e.vars.radius.sm,"--Alert-decoratorChildRadius":"max((var(--Alert-radius) - var(--variant-borderWidth, 0px)) - var(--Alert-padding), min(var(--Alert-padding) + var(--variant-borderWidth, 0px), var(--Alert-radius) / 2))","--Button-minHeight":"var(--Alert-decoratorChildHeight)","--IconButton-size":"var(--Alert-decoratorChildHeight)","--Button-radius":"var(--Alert-decoratorChildRadius)","--IconButton-radius":"var(--Alert-decoratorChildRadius)","--Icon-color":"currentColor"},"sm"===r.size&&{"--Alert-padding":"0.5rem","--Alert-decoratorChildHeight":"1.5rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.5rem"},"md"===r.size&&{"--Alert-padding":"0.75rem","--Alert-decoratorChildHeight":"2rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.625rem"},"lg"===r.size&&{"--Alert-padding":"1rem","--Alert-decoratorChildHeight":"2.375rem","--Icon-fontSize":e.vars.fontSize.xl2,gap:"0.875rem"},{backgroundColor:e.vars.palette.background.surface,display:"flex",position:"relative",alignItems:"center",padding:"var(--Alert-padding)",borderRadius:"var(--Alert-radius)"},e.typography[`body-${({sm:"xs",md:"sm",lg:"md"})[r.size]}`],{fontWeight:e.vars.fontWeight.md},"solid"===r.variant&&r.color&&r.invertedColors&&(0,E.Qr)(r.color)(e),"soft"===r.variant&&r.color&&r.invertedColors&&(0,E.Ev)(r.color)(e),null==(t=e.variants[r.variant])?void 0:t[r.color]),void 0!==a&&{"--Alert-padding":a},void 0!==o&&{"--Alert-padding":o},void 0!==n&&{"--Alert-radius":n}]}),X=(0,w.Z)("span",{name:"JoyAlert",slot:"StartDecorator",overridesResolver:(e,r)=>r.startDecorator})({display:"inherit",flex:"none"}),q=(0,w.Z)("span",{name:"JoyAlert",slot:"EndDecorator",overridesResolver:(e,r)=>r.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),G=o.forwardRef(function(e,r){let t=(0,N.Z)({props:e,name:"JoyAlert"}),{children:o,className:n,color:s="neutral",invertedColors:i=!1,role:l="alert",variant:d="soft",size:h="md",startDecorator:p,endDecorator:v,component:g,slots:f={},slotProps:x={}}=t,b=(0,c.Z)(t,J),y=(0,u.Z)({},t,{color:s,invertedColors:i,variant:d,size:h}),j=T(y),k=(0,u.Z)({},b,{component:g,slots:f,slotProps:x}),[Z,w]=(0,S.Z)("root",{ref:r,className:(0,m.Z)(j.root,n),elementType:U,externalForwardedProps:k,ownerState:y,additionalProps:{role:l}}),[C,E]=(0,S.Z)("startDecorator",{className:j.startDecorator,elementType:X,externalForwardedProps:k,ownerState:y}),[z,A]=(0,S.Z)("endDecorator",{className:j.endDecorator,elementType:q,externalForwardedProps:k,ownerState:y});return(0,a.jsxs)(Z,(0,u.Z)({},w,{children:[p&&(0,a.jsx)(C,(0,u.Z)({},E,{children:p})),o,v&&(0,a.jsx)(z,(0,u.Z)({},A,{children:v}))]}))});var V=t(8428),Y=t(3793),K=t(2390),Q=t(7645),ee=t(4665),er=t(9122),et=t(639);function ea({isOpen:e,onToggle:r,onViewChange:t,currentView:i}){let l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let t=t=>{e&&l.current&&!l.current.contains(t.target)&&r()};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e,r]),(0,a.jsxs)(a.Fragment,{children:[!e&&a.jsx(Y.ZP,{onClick:r,className:"fixed top-20 left-4 z-50 bg-white shadow-lg",children:a.jsx(ee.Z,{})}),(0,a.jsxs)(n.Z,{ref:l,className:`fixed top-16 left-0 h-[calc(100vh-4rem)] bg-white shadow-xl transition-transform duration-300 z-40 w-64 
          ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx(s.ZP,{level:"h4",children:"Control Panel"})}),(0,a.jsxs)(K.Z,{className:"p-4",children:[(0,a.jsxs)(Q.Z,{className:`mb-2 rounded-lg cursor-pointer ${"projects"===i?"bg-blue-50":"hover:bg-gray-100"}`,onClick:()=>t("projects"),children:[a.jsx(er.Z,{className:"mr-3"}),a.jsx(s.ZP,{children:"Projecty"})]}),(0,a.jsxs)(Q.Z,{className:`mb-2 rounded-lg cursor-pointer ${"tags"===i?"bg-blue-50":"hover:bg-gray-100"}`,onClick:()=>t("tags"),children:[a.jsx(et.Z,{className:"mr-3"}),a.jsx(s.ZP,{children:"Št\xedtky"})]})]})]})]})}var eo=t(6675),en=t(7592),es=t(5836),ei=t(7359),el=t(2256),ed=t(3575),ec=t(8330);function eu(){let[e,r]=(0,o.useState)(!1),[t,c]=(0,o.useState)("projects"),[u,m]=(0,o.useState)([]),[h,p]=(0,o.useState)([]),[v,g]=(0,o.useState)(!0),[f,x]=(0,o.useState)(null),[b,y]=(0,o.useState)(!0),j=(0,V.useRouter)(),[k,Z]=(0,o.useState)(!1),[S,w]=(0,o.useState)(""),[N,C]=(0,o.useState)("newest"),[E,z]=(0,o.useState)("all"),[A,P]=(0,o.useState)(""),[D,$]=(0,o.useState)("all"),[R,L]=(0,o.useState)({});(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){j.push("/login");return}try{if(!(await fetch(`${ec.v.apiUrl}/api/auth/validate/admin`,{method:"GET",headers:{Authorization:`Bearer ${e}`}})).ok)throw Error("Invalid token");y(!1)}catch(e){j.push("/")}})()},[j]),(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");g(!0);try{if("projects"===t){let r=await fetch(`${ec.v.apiUrl}/api/check/projects`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error("Failed to fetch projects");let t=await r.json();if(!Array.isArray(t)){if(console.error("Expected array but got:",t),t&&"object"==typeof t){let e=Object.values(t);if(Array.isArray(e)&&e.length>0)t=e;else{m([]);return}}else{m([]);return}}let a=await Promise.all(t.map(async r=>{let t=String(r),a=await fetch(`${ec.v.apiUrl}/api/check/projects?id=${t}`,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw Error(`Failed to fetch project ${t}`);let o=await a.json();return{id:t,name:o.name||"Unnamed Project",thumbnail:o.thumbnail||"",status:o.status||"Waiting for checkup."}}));m(a)}else{let r=await fetch(`${ec.v.apiUrl}/api/check/tags`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error("Failed to fetch tags");let t=await r.json();if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.error("Failed to parse tags JSON:",e),p([]);return}if(!Array.isArray(t)){if(console.error("Expected array of tags but got:",t),t&&"object"==typeof t){let e=Object.values(t);if(Array.isArray(e)&&e.length>0)t=e;else{p([]);return}}else{p([]);return}}let a=t.map(e=>{let r=e.ID||e.id||"",t=e.Name||e.name||"",a=void 0!==e.Added?e.Added:void 0!==e.added&&e.added;return{ID:r,Name:t,Added:a}});p(a)}}catch(e){console.error("Fetch error:",e),x(e instanceof Error?e.message:"Failed to fetch data")}finally{g(!1)}})()},[t]),(0,o.useEffect)(()=>{f&&Z(!0)},[f]);let O=async(e,r)=>{if(!R[e])try{L(r=>({...r,[e]:!0}));let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found");if(!(await fetch(`${ec.v.apiUrl}/api/check/tags/review?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({approved:r})})).ok)throw Error("Failed to update tag");await M(t)}catch(e){console.error("Error updating tag:",e),x(e instanceof Error?e.message:"Failed to update tag")}finally{L(r=>({...r,[e]:!1}))}},I=async e=>{if(!R[e])try{L(r=>({...r,[e]:!0}));let r=localStorage.getItem("token");if(!r)throw Error("No authentication token found");if(!(await fetch(`${ec.v.apiUrl}/api/check/tags/review?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({approved:!1})})).ok)throw Error("Failed to delete tag");await M(r)}catch(e){console.error("Error deleting tag:",e),x(e instanceof Error?e.message:"Failed to delete tag")}finally{L(r=>({...r,[e]:!1}))}},M=async e=>{try{let r=await fetch(`${ec.v.apiUrl}/api/check/tags`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error("Failed to fetch updated tags");let t=await r.json();if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.error("Failed to parse tags JSON:",e),p([]);return}if(!Array.isArray(t)){if(console.error("Expected array of tags but got:",t),t&&"object"==typeof t){let e=Object.values(t);if(Array.isArray(e)&&e.length>0)t=e;else{p([]);return}}else{p([]);return}}let a=t.map(e=>{let r=e.ID||e.id||"",t=e.Name||e.name||"",a=void 0!==e.Added?e.Added:void 0!==e.added&&e.added;return{ID:r,Name:t,Added:a}});p(a)}catch(e){console.error("Error refreshing tags:",e),x(e instanceof Error?e.message:"Failed to refresh tags")}},B=u.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())&&("all"===E||"approved"===E&&"Approved."===e.status||"denied"===E&&"Denied."===e.status||"pending"===E&&"Waiting for checkup."===e.status)),F=h.filter(e=>{let r=e.Name||e.name||"",t=void 0!==e.Added?e.Added:void 0!==e.added&&e.added;return r.toLowerCase().includes(A.toLowerCase())&&("all"===D||"added"===D&&t||"pending"===D&&!t)});return b?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50",children:a.jsx(l.Z,{size:"lg"})}):v?a.jsx(d.Z,{className:"min-h-screen flex items-center justify-center",children:a.jsx(l.Z,{size:"lg"})}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(eo.Z,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex pt-16",children:[a.jsx(ea,{isOpen:e,onToggle:()=>r(!e),onViewChange:c,currentView:t}),a.jsx("main",{className:`flex-1 transition-all duration-300 ${e?"ml-64":"ml-0"}`,children:a.jsx("div",{className:"p-8",children:"projects"===t?(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg p-6 space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx(ei.ZP,{startDecorator:a.jsx(en.Z,{}),placeholder:"Hledat...",value:S,onChange:e=>w(e.target.value),className:"flex-1"}),(0,a.jsxs)(el.Z,{placeholder:"Seřadit podle data",value:N,onChange:(e,r)=>{r&&C(r)},startDecorator:a.jsx(es.Z,{}),className:"min-w-[150px]",children:[a.jsx(ed.Z,{value:"newest",children:"Od nejnovějš\xedho"}),a.jsx(ed.Z,{value:"oldest",children:"Od nejstarš\xedho"})]}),(0,a.jsxs)(el.Z,{placeholder:"Filtrovat podle stavu",value:E,onChange:(e,r)=>{r&&z(r)},className:"min-w-[150px]",children:[a.jsx(ed.Z,{value:"all",children:"Všechny"}),a.jsx(ed.Z,{value:"approved",children:"Schv\xe1len\xe9"}),a.jsx(ed.Z,{value:"denied",children:"Zam\xedtnut\xe9"}),a.jsx(ed.Z,{value:"pending",children:"Čekaj\xedc\xed"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(e=>(0,a.jsxs)(n.Z,{className:"bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("img",{src:`${ec.v.apiUrl}/`+e.thumbnail,alt:e.name,className:"w-full h-48 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center",children:a.jsx("div",{className:"transform translate-y-4 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300",children:a.jsx("button",{onClick:()=>j.push(`/admin/check/${e.id}`),className:"bg-blue-300 text-white px-4 py-2 rounded-lg mx-2",children:"Control"})})}),a.jsx("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-sm font-medium
                  ${"Approved."===e.status?"bg-green-100 text-green-800":"Denied."===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),a.jsx("div",{className:"p-4",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:e.name})})]},e.id))})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg p-6 space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx(ei.ZP,{startDecorator:a.jsx(en.Z,{}),placeholder:"Hledat št\xedtky...",value:A,onChange:e=>P(e.target.value),className:"flex-1"}),(0,a.jsxs)(el.Z,{placeholder:"Filtrovat podle stavu",value:D,onChange:(e,r)=>{r&&$(r)},className:"min-w-[150px]",children:[a.jsx(ed.Z,{value:"all",children:"Všechny"}),a.jsx(ed.Z,{value:"added",children:"Přidan\xe9"}),a.jsx(ed.Z,{value:"pending",children:"Čekaj\xedc\xed"})]})]})}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx(s.ZP,{level:"h4",className:"text-gray-800",children:"Spr\xe1va št\xedtků"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[F.length," št\xedtků"]})]})}),(0,a.jsxs)("div",{className:"divide-y divide-gray-100",children:[F.map(e=>{let r=e.ID||e.id||"",t=e.Name||e.name||"",o=void 0!==e.Added?e.Added:void 0!==e.added&&e.added;return(0,a.jsxs)("div",{className:"p-6 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-lg font-medium text-gray-900",children:t}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",r]})]}),o?a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Přid\xe1no"}):a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"Ček\xe1 na schv\xe1len\xed"})]}),a.jsx("div",{className:"flex space-x-3",children:o?a.jsx(i.Z,{onClick:()=>I(r),color:"danger",variant:"soft",size:"sm",disabled:R[r],endDecorator:R[r]&&a.jsx(l.Z,{size:"sm"}),className:"transition-transform hover:scale-105",children:R[r]?"Maz\xe1n\xed...":"Smazat"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Z,{onClick:()=>O(r,!0),color:"success",variant:"soft",size:"sm",disabled:R[r],endDecorator:R[r]&&a.jsx(l.Z,{size:"sm"}),className:"transition-transform hover:scale-105",children:R[r]?"Schvalov\xe1n\xed...":"Schv\xe1lit"}),a.jsx(i.Z,{onClick:()=>O(r,!1),color:"danger",variant:"soft",size:"sm",disabled:R[r],endDecorator:R[r]&&a.jsx(l.Z,{size:"sm"}),className:"transition-transform hover:scale-105",children:R[r]?"Zam\xedt\xe1n\xed...":"Zam\xedtnout"})]})})]},r)}),0===F.length&&a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nebyly nalezeny ž\xe1dn\xe9 št\xedtky"})]})]})]})})}),a.jsx(H,{open:k,autoHideDuration:6e3,onClose:()=>{Z(!1),x(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},className:"fixed bottom-4 right-4",children:a.jsx(G,{component:"div",variant:"soft",color:"danger",size:"lg",children:f})})]})]})}},6675:(e,r,t)=>{"use strict";t.d(r,{Z:()=>h});var a=t(5344),o=t(3729),n=t(2383),s=t(5803),i=t(8428),l=t(6702),d=t(3266),c=t(8077),u=t(9122),m=t(8330);function h(){let e=(0,i.useRouter)(),[r,t]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=()=>{t(localStorage.getItem("name"))};return e(),window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[]),a.jsx("nav",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-[60]",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:`${m.v.apiUrl}/uploads/SPSE-Jecna_Logotyp.svg`,alt:"SPSE Jecna Logo",className:"h-15 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>e.push("/")})}),a.jsx("div",{className:"flex items-center gap-4",children:r?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{variant:"soft",color:"primary",onClick:()=>e.push("/my-projects"),startDecorator:a.jsx(u.Z,{}),className:"transition-all hover:scale-105",children:"Moje projekty"}),a.jsx(n.Z,{variant:"soft",color:"primary",onClick:()=>e.push("/upload"),startDecorator:a.jsx(c.Z,{}),className:"transition-all hover:scale-105",children:"Nahr\xe1t"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx(l.Z,{className:"text-gray-600"}),a.jsx(s.ZP,{level:"body-sm",className:"text-gray-600",children:r})]}),a.jsx(n.Z,{variant:"soft",color:"neutral",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("name"),window.location.reload()},startDecorator:a.jsx(d.Z,{}),className:"transition-all hover:scale-105",children:"Odhl\xe1sit se"})]}):a.jsx(n.Z,{variant:"solid",color:"primary",onClick:()=>e.push("/login"),className:"transition-all hover:scale-105",children:"Přihl\xe1sit se"})})]})})})}},8330:(e,r,t)=>{"use strict";t.d(r,{v:()=>a});let a={apiUrl:"http://80.211.200.124/:5148"}},639:(e,r,t)=>{"use strict";var a=t(9286);r.Z=void 0;var o=a(t(389)),n=t(5344);r.Z=(0,o.default)((0,n.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},4665:(e,r,t)=>{"use strict";var a=t(9286);r.Z=void 0;var o=a(t(389)),n=t(5344);r.Z=(0,o.default)((0,n.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},7592:(e,r,t)=>{"use strict";var a=t(9286);r.Z=void 0;var o=a(t(389)),n=t(5344);r.Z=(0,o.default)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},5836:(e,r,t)=>{"use strict";var a=t(9286);r.Z=void 0;var o=a(t(389)),n=t(5344);r.Z=(0,o.default)((0,n.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort")},918:(e,r,t)=>{"use strict";t.d(r,{Z:()=>j});var a=t(1848),o=t(5651),n=t(3729),s=t(6815),i=t(5543),l=t(581),d=t(589),c=t(3130),u=t(1804),m=t(6294),h=t(5344);let p=["className","component","disableGutters","fixed","maxWidth","classes"],v=(0,m.Z)(),g=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[`maxWidth${(0,d.Z)(String(t.maxWidth))}`],t.fixed&&r.fixed,t.disableGutters&&r.disableGutters]}}),f=e=>(0,c.Z)({props:e,name:"MuiContainer",defaultTheme:v}),x=(e,r)=>{let{classes:t,fixed:a,disableGutters:o,maxWidth:n}=e,s={root:["root",n&&`maxWidth${(0,d.Z)(String(n))}`,a&&"fixed",o&&"disableGutters"]};return(0,l.Z)(s,e=>(0,i.ZP)(r,e),t)};var b=t(7962),y=t(9676);let j=function(e={}){let{createStyledComponent:r=g,useThemeProps:t=f,componentName:i="MuiContainer"}=e,l=r(({theme:e,ownerState:r})=>(0,o.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!r.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}),({theme:e,ownerState:r})=>r.fixed&&Object.keys(e.breakpoints.values).reduce((r,t)=>{let a=e.breakpoints.values[t];return 0!==a&&(r[e.breakpoints.up(t)]={maxWidth:`${a}${e.breakpoints.unit}`}),r},{}),({theme:e,ownerState:r})=>(0,o.Z)({},"xs"===r.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},r.maxWidth&&"xs"!==r.maxWidth&&{[e.breakpoints.up(r.maxWidth)]:{maxWidth:`${e.breakpoints.values[r.maxWidth]}${e.breakpoints.unit}`}}));return n.forwardRef(function(e,r){let n=t(e),{className:d,component:c="div",disableGutters:u=!1,fixed:m=!1,maxWidth:v="lg"}=n,g=(0,a.Z)(n,p),f=(0,o.Z)({},n,{component:c,disableGutters:u,fixed:m,maxWidth:v}),b=x(f,i);return(0,h.jsx)(l,(0,o.Z)({as:c,ownerState:f,className:(0,s.Z)(b.root,d),ref:r},g))})}({createStyledComponent:(0,b.Z)("div",{name:"JoyContainer",slot:"Root",overridesResolver:(e,r)=>r.root}),useThemeProps:e=>(0,y.Z)({props:e,name:"JoyContainer"})})},2084:(e,r,t)=>{"use strict";t.d(r,{V:()=>o});var a=t(5651);let o=({theme:e,ownerState:r},t)=>{let o={};return r.sx&&(function r(t){"function"==typeof t?r(t(e)):Array.isArray(t)?t.forEach(e=>{"boolean"!=typeof e&&r(e)}):"object"==typeof t&&(o=(0,a.Z)({},o,t))}(r.sx),t.forEach(r=>{let t=o[r];if("string"==typeof t||"number"==typeof t){if("borderRadius"===r){if("number"==typeof t)o[r]=`${t}px`;else{var a;o[r]=(null==(a=e.vars)?void 0:a.radius[t])||t}}else -1!==["p","padding","m","margin"].indexOf(r)&&"number"==typeof t?o[r]=e.spacing(t):o[r]=t}else"function"==typeof t?o[r]=t(e):o[r]=void 0})),o}},8201:(e,r,t)=>{"use strict";t.d(r,{Yb:()=>l,b1:()=>s,yP:()=>i});var a=t(3729),o=t(5344);let n=a.createContext(void 0);function s(e,r){let t=r,a=e;return"outlined"===e&&(t="neutral",a="plain"),"plain"===e&&(t="neutral"),{variant:a,color:t}}function i(e,r,t=!1){let o=a.useContext(n),[i,l]="string"==typeof o?o.split(":"):[],d=s(i||void 0,l||void 0);return d.variant=e||d.variant,d.color=r||(t?l:d.color),d}function l({children:e,color:r,variant:t}){return(0,o.jsx)(n.Provider,{value:`${t||""}:${r||""}`,children:e})}},1804:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(1977).ZP)()},9481:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>o,default:()=>s});let a=(0,t(6843).createProxy)(String.raw`D:\Cursor\kiosek2.0\frontend\kiosek\app\admin\page.tsx`),{__esModule:o,$$typeof:n}=a,s=a.default},2585:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>s});var a=t(5036),o=t(450),n=t.n(o);t(7272);let s={title:"SPŠE Jecn\xe1 - Kiosek",description:"Kiosek pro SPŠE Jecn\xe1 projekty",viewport:"width=device-width, initial-scale=1, maximum-scale=1",icons:{icon:[{url:"/favicon.ico",sizes:"any"},{url:"http://80.211.200.124/:5148/uploads/SPSE-Jecna_Logo.svg",type:"image/svg+xml"}]}};function i({children:e}){return a.jsx("html",{lang:"en",className:`h-full ${n().variable}`,children:a.jsx("body",{className:"antialiased min-h-full flex flex-col bg-background text-foreground",children:a.jsx("main",{className:"flex-grow flex flex-col",children:e})})})}},7481:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(337);let o=e=>[{type:"image/x-icon",sizes:"256x256",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,68,334,92,806,980,697],()=>t(4111));module.exports=a})();