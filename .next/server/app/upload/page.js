(()=>{var e={};e.id=676,e.ids=[676],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},7880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=r(482),s=r(9108),i=r(2563),n=r.n(i),o=r(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1453)),"D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\upload\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2585)),"D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Cursor\\kiosek2.0\\frontend\\kiosek\\app\\upload\\page.tsx"],p="/upload/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8299:(e,t,r)=>{Promise.resolve().then(r.bind(r,3421))},3421:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(5344),s=r(3729),i=r(8136),n=r(918),o=r(1013),l=r(5320),d=r(2963),c=r(2946),p=r(1174),u=r(2383),m=r(8428),x=r(3637),h=r(1507),g=r(2222),f=r(7558),j=r(8396),b=r(7903),v=r(5774),k=r(6675),y=r(8330);function w(){let e=(0,m.useRouter)(),[t,r]=(0,s.useState)(!0),[w,P]=(0,s.useState)(0),[Z,_]=(0,s.useState)("horizontal"),[D,S]=(0,s.useState)({name:"",tags:[],description:"",thumbnail:null,media:[]}),[N,q]=(0,s.useState)([]),[E,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{if(!(await fetch(`${y.v.apiUrl}/api/auth/validate`,{method:"GET",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("Invalid token");r(!1)}catch(t){localStorage.removeItem("token"),localStorage.removeItem("name"),e.push("/login")}})()},[e]),(0,s.useEffect)(()=>{let e=()=>{_(window.innerWidth<600?"vertical":"horizontal")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let C=["N\xe1zev","Popis","Thumbnail","Media","Uk\xe1zka"],G=async()=>{if(!E)try{z(!0);let t=(0,v.Ow)(D);if(t.length>0){q(t),z(!1);return}let r=localStorage.getItem("token");if(!r){e.push("/login");return}let a=new FormData;a.append("name",D.name),a.append("description",D.description),a.append("tags",JSON.stringify(D.tags)),D.thumbnail&&a.append("thumbnail",D.thumbnail),D.media.forEach((e,t)=>{a.append(`media_${t}`,e)});let s=await fetch(`${y.v.apiUrl}/api/project`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to submit project")}let i=await s.json();console.log("Project submitted successfully:",i),P(e=>e+1),e.push("/my-projects")}catch(e){q([e.message||"Failed to submit project"])}finally{z(!1)}};return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50",children:a.jsx(i.Z,{size:"lg"})}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(k.Z,{}),a.jsx("div",{className:"pt-16",children:a.jsx(n.Z,{maxWidth:!1,disableGutters:!0,className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex flex-col",children:a.jsx(n.Z,{maxWidth:"lg",className:"py-8 px-4 flex-grow flex flex-col justify-center",children:(0,a.jsxs)(o.Z,{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-xl p-4 sm:p-6 md:p-8 mx-auto w-full",sx:{border:"1px solid rgba(255, 255, 255, 0.2)"},children:[a.jsx(l.Z,{orientation:Z,sx:{width:"100%",mb:4,"& .MuiStepButton-root":{cursor:"default"},"@media (max-width: 640px)":{"& .MuiStep-root":{padding:"8px 0"},"& .MuiStepConnector-line":{minHeight:"24px"}}},children:C.map((e,t)=>a.jsx(d.Z,{indicator:a.jsx(c.Z,{variant:w<=t?"soft":"solid",color:w<t?"neutral":"primary",children:w<=t?t+1:a.jsx(x.Z,{})}),sx:[w>t&&t!==C.length-1&&{"&::after":{bgcolor:"primary.solidBg"}}],children:a.jsx(p.Z,{children:e})},e))}),a.jsx("div",{className:"mt-8",children:w===C.length?a.jsx("div",{className:"text-center py-12",children:a.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:"All steps completed - your project is being submitted"})}):(0,a.jsxs)("div",{children:[(e=>{switch(e){case 0:return a.jsx(h.Z,{projectData:D,setProjectData:S});case 1:return a.jsx(g.Z,{projectData:D,setProjectData:S});case 2:return a.jsx(f.Z,{projectData:D,setProjectData:S});case 3:return a.jsx(j.Z,{projectData:D,setProjectData:S});case 4:return a.jsx(b.Z,{projectData:D});default:return"Unknown step"}})(w),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[a.jsx(u.Z,{variant:"outlined",color:"neutral",disabled:0===w,onClick:()=>{P(e=>e-1)},children:"Zpět"}),a.jsx("div",{className:"flex gap-2",children:w===C.length-1?a.jsx(u.Z,{variant:"solid",color:"primary",onClick:G,disabled:E,endDecorator:E&&a.jsx(i.Z,{size:"sm"}),children:E?"Odes\xedl\xe1n\xed...":"Odeslat"}):a.jsx(u.Z,{variant:"solid",color:"primary",onClick:()=>{let e=(0,v.sc)(w,D);if(e.length>0){q(e);return}q([]),P(e=>e+1)},children:"Dalš\xed"})})]}),N.length>0&&a.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:N.map((e,t)=>a.jsx("p",{className:"text-red-600",children:e},t))})]})})]})})})})]})}},1453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>n});let a=(0,r(6843).createProxy)(String.raw`D:\Cursor\kiosek2.0\frontend\kiosek\app\upload\page.tsx`),{__esModule:s,$$typeof:i}=a,n=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,68,334,92,806,116,980,697,242,408],()=>r(7880));module.exports=a})();